# Домашнее задание к занятию "TCP клиент"

### Цель задания

В результате выполнения этого задания вы научитесь создавать TCP сокеты, принимать и отправлять данные, а также работать с протоколами инфомрационного взаимодействия.

------

### Инструкция к заданию

1. Скачать исполняемый файл и библиотеки сервера (необходимо для проверки и отладки).
2. Создать новый проект WidgetApplication.
3. Подключить модуль Qt Network.
4. Создать класс обработчик взаимодействия с сервером.
5. Выполнить требование задания.

------

### Задание 1. 

Необходимо разработать клиентское приложение, которое обладает следующим фурнкционалом:

1. Подключается к TCP серверу. Адрес и порт сервера вводятся из пользовательского интерфейса.
2. Позволяет пользвателю выбрать один из 5 запросов к серверу (ComboBox):
  * Запрос времени
  * Запрос статистики
  * Запрос свободного метса
  * Отправка данных на сервер
  * Очистка памяти на сервере
3. Данные для отправки должны вводится в пользовательском интерфейсе при помощи виджета LineEdit.
4. Приложение должно взаимодействовать с сервером при помощи объекта класса QTcpSocket.
5. Приложение должно отправлять запросы на сервер согласно протоколу инфомрационного взаимодействия
6. Приложение должно принимать ответы от сервера.
7. Приложение должно выводить ответы от сервера в удобном для пользователя виде.
8. Функционал работы с сервером должен находиться в отдельном классе.


------

### Правила приема работы

1. Отправлена ссылка на репозиторий с кодом ДЗ

------

### Критерий зачета

* Реализована передача и прием хотя бы **одного** сообщения.
* Прием и передача осуществляются на сервер при помощи QTcpSocket.
* Класс работы с TCP сокетом отделен от MainWindow
* Ответ от сервера выводится в удобном для пользователя виде (прим. "Текущая время и дата на сервере 01 фев 2001 21:53:12", а не в виде массива байт)

------

### Дополнительное задание

Реализовать прием и отправку всех сообщений соглано Протоколу информационного взаимодействия.

------

### Протокол информационного взаимодействия

- Сервер отвечает на сообщения клиента. 
- На сервер можно записать строковые данные, которые он интерпретирует как QString.
- Емкость сервера 1000 байт, как только емкость израсходуется сервер будет отвечать ошибкой, о нехватке места.
- Сервер отвечает на сообщения клиента согласно настоящиму протоколу инфомрационного взаимодействия (ПИВ).
- Для запроса инфомрации клиенту необходимо заполнить заголовок в соответствии с текущим ПИВ и передать на сервер.
- В случае если производится запрос данных с сервера, передается только заголовок.
- Все структуры данных на сервере выровнены по 1му байту.

##### Общий формат сообщений

| Заголовок сообщения | Данные |
|:---------:|:---------:|

#### Формат заголовка сообщения

| Поле | Тип данных | Размер, байт |
|:---------:|:---------:|:---------:|
|Идентификатор начала сообщения|uint16|2|
|Идентификатор данных в сообщении|uint16|2|
|Статус обработки сообщения|uint8|1|
|Размер данных далее, байт|uint32|4|

#### Форматы сообщений

| Сообщение | Идентификатор сообщения, dec | Формат данных ответа |
|:---------:|:---------:|:---------:|
|Запрос текущего времени|100|QDateTime|
|Запрос свободного места на сервере|101|uint32|
|Запрос статистики|103|-|
|Передача строки на сервер|200|QString|
|Освободить место на сервере|201|Ответ заголовком со статусом 1|

#### Формат ответа статистики сервера

| Поле | Тип данных | Размер, байт |
|:---------:|:---------:|:---------:|
|Количество принятых байт|int32|4|
|Количество переданных байт|int32|4|
|Количество принятых пакетов|int32|4|
|Количество переданных пакетов|int32|4|
|Время работы сервера, сек|int32|4|
|Количество подключенных клиентов|int32|4|

#### Типы ошибок 

| Код ошибки, dec | Значение |
|:---------:|:---------:|
|10|Недостаточно места на сервере|

